<!DOCTYPE html5> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> 
<head> 
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.11/angular.min.js"></script>
<script type="text/javascript" src="glooer.js"></script>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title> 
glooer.js
</title> 
<style> 
html, body {
	line-height: 1;
	font: 13px Helvetica, 'Liberation Sans', Arial, FreeSans, sans-serif;
	background-color: #fafafa;
	color: #000000;
	width: 100%;
	height: 100%;
	padding: 0px;
	margin: 0px;
}
</style> 

<script type="text/javascript">
angular.module( 'GlooerExample', [ 'Glooer' ] )

.controller( 'GlooerExampleController', function( $scope, $controller )
{
	$controller( 'GlooerController', { '$scope': $scope } );

	$scope.dump = function()
	{
		console.log( { sources: $scope.sources, values: $scope.values } );
	};

	$scope.reduce = function( a, b )
	{
		var c = $scope.JSON.parse( a );

		angular.forEach( $scope.JSON.parse( b ), function( e ){ c.push( e ) } )

		return $scope.JSON.stringify( c );
	};

	$scope.parse_input = function( i )
	{
		return i;
	};

	$scope.JSON = window.JSON;
	$scope.default_value = $scope.JSON.stringify( [] );

	var old_iv = $scope.iv;

	$scope.iv = function()
	{
		if( arguments.length == 2 )
		{
			arguments[ 1 ] = $scope.JSON.stringify( arguments[ 1 ] );
		}

		return old_iv.apply( $scope, arguments );
	};
} )

;
</script>

</head> 
<body>

<div ng-app="GlooerExample">

<div ng-controller="GlooerExampleController">

<table>

<tr>
<td ng-init="iv(['td','one'],[1,2,3])">{{sources.td.one}}</td>
<td ng-init="iv(['td','two'],[4,5,6])">{{sources.td.two}}</td>
</tr>

</table>

<p>agg: {{values.td._}}</p>
<p>td.one: {{JSON.parse(values.td.one._).join(', ')}}</p>
<p ng-init="cv(['cv', 'first'],[ [ 'td', 'one' ], [ 'td', 'two' ] ])">cv: {{values.cv.first._}}</p>

<input type="button" value="dump" ng-click="dump()" />
</div>

</div>

</body> 
</html> 


